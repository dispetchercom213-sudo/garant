# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é GARANT BETON

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- [–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Render](#render)
- [–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å Docker](#docker)
- [–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#local)
- [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#env-vars)

---

## <a name="render"></a>üì¶ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Render

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Blueprint

1. **–í–æ–π–¥–∏—Ç–µ –Ω–∞ [Render](https://render.com)**

2. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Blueprint:**
   - –ù–∞–∂–º–∏—Ç–µ "New" ‚Üí "Blueprint"
   - –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–∞—à GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `dispetchercom213-sudo/garant`
   - Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥–µ—Ç `render.yaml` –∏ —Å–æ–∑–¥–∞—Å—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**

   –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤, —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

   **Backend:**
   ```
   DATABASE_URL=<auto-filled from database>
   JWT_SECRET=<auto-generated>
   NODE_ENV=production
   PORT=4000
   CORS_ORIGIN=https://garant-beton-frontend.onrender.com
   ```

4. **–î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–ø–ª–æ—è** (–æ–±—ã—á–Ω–æ 5-10 –º–∏–Ω—É—Ç)

5. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ seed –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ Shell –¥–ª—è backend —Å–µ—Ä–≤–∏—Å–∞ –≤ Render Dashboard
   - –í—ã–ø–æ–ª–Ω–∏—Ç–µ: `npm run prisma:seed`

### –†—É—á–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

–ï—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

#### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)
- **New** ‚Üí **PostgreSQL**
- Name: `garant-beton-db`
- Database: `garant_beton`
- Plan: Free
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Internal Database URL**

#### 2. Backend (Web Service)
- **New** ‚Üí **Web Service**
- Build Command: `npm run build`
- Start Command: `npm start`
- Environment Variables:
  ```
  DATABASE_URL=<paste Internal Database URL>
  JWT_SECRET=<random-secret-key>
  NODE_ENV=production
  PORT=4000
  CORS_ORIGIN=https://your-frontend-name.onrender.com
  ```

#### 3. Frontend (Static Site)
- **New** ‚Üí **Static Site**
- Build Command: `cd frontend && npm install && npm run build`
- Publish Directory: `frontend/dist`
- Environment Variables:
  ```
  VITE_API_URL=https://your-backend-name.onrender.com
  ```

---

## <a name="docker"></a>üê≥ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å Docker

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å Docker Compose

1. **–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª:**
```bash
DB_PASSWORD=your_secure_password
JWT_SECRET=your-super-secret-jwt-key
```

2. **–°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:**
```bash
# –°–±–æ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
cd frontend
npm install
npm run build
cd ..

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose -f docker-compose.prod.yml up -d
```

3. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:**
```bash
docker exec -it garant-beton-backend sh
cd backend
npx prisma migrate deploy
npx prisma db seed
```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:**
- Backend: http://localhost:4000/api/v1/health
- Frontend: http://localhost:3000

### –°–±–æ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ backend image

```bash
docker build -t garant-beton:latest .
docker run -p 4000:4000 \
  -e DATABASE_URL="postgresql://user:pass@host:5432/db" \
  -e JWT_SECRET="your-secret" \
  garant-beton:latest
```

---

## <a name="local"></a>üíª –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Node.js 18+ 
- npm 9+
- PostgreSQL 14+
- Git

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
```bash
git clone https://github.com/dispetchercom213-sudo/garant.git
cd garant
```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
```bash
cd infra
docker compose up -d db
cd ..
```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ backend:**
```bash
cd backend
npm install
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª
npx prisma generate
npx prisma migrate dev
npm run prisma:seed
npm run start:dev
```

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ frontend:**
```bash
cd frontend
npm install
npm run dev
```

5. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
- Frontend: http://localhost:5173
- Backend API: http://localhost:4000/api/v1
- API Health: http://localhost:4000/api/v1/health

### –°–∫—Ä–∏–ø—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**Backend:**
```bash
npm run start:dev      # –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run build          # –°–±–æ—Ä–∫–∞
npm run start:prod     # –ó–∞–ø—É—Å–∫ production –≤–µ—Ä—Å–∏–∏
npm run prisma:studio  # Prisma Studio –¥–ª—è –ë–î
```

**Frontend:**
```bash
npm run dev            # –ó–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞
npm run build          # –°–±–æ—Ä–∫–∞ –¥–ª—è production
npm run preview        # –ü—Ä–µ–≤—å—é production —Å–±–æ—Ä–∫–∏
```

---

## <a name="env-vars"></a>üîê –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### Backend (.env)

```bash
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL="postgresql://user:password@localhost:5432/garant_beton"

# JWT
JWT_SECRET="your-super-secret-key-min-32-chars"

# API
PORT=4000
NODE_ENV=development

# CORS (multiple origins separated by comma)
CORS_ORIGIN="http://localhost:3000,http://localhost:5173"

# Email (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
EMAIL_FROM=noreply@yourdomain.com
```

### Frontend (.env)

```bash
# API URL
VITE_API_URL=http://localhost:4000/api/v1
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Health Checks

**Backend:**
```bash
curl https://your-backend.onrender.com/api/v1/health
```

–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:
```json
{
  "status": "ok",
  "timestamp": "2025-10-19T...",
  "service": "GARANT BETON API",
  "version": "1.0.0"
}
```

**Frontend:**
```bash
curl https://your-frontend.onrender.com/health
```

---

## üîß Troubleshooting

### Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DATABASE_URL` - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å Internal Database URL
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `JWT_SECRET` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `Logs` –≤ Render Dashboard

### Frontend –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Backend
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `VITE_API_URL` –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `CORS_ORIGIN` –≤–∫–ª—é—á–∞–µ—Ç URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ backend —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
- –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–ø–ª–æ—è –ë–î
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Internal** Database URL, –Ω–µ External
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

### Render "—Å–ø–∏—Ç" (Free tier)
- –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞—Å—ã–ø–∞—é—Ç –ø–æ—Å–ª–µ 15 –º–∏–Ω –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è
- –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –ø–æ—Å–ª–µ "–ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è" –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 30-60 —Å–µ–∫
- –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω –¥–ª—è production

---

## üìù –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ (–ª–æ–∫–∞–ª—å–Ω–æ)
docker logs garant-beton-backend -f
docker logs garant-beton-frontend -f

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
docker exec -it garant-beton-db psql -U postgres -d garant_beton

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose -f docker-compose.prod.yml restart

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose -f docker-compose.prod.yml down

# –û—á–∏—Å—Ç–∫–∞ –∏ –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞
docker-compose -f docker-compose.prod.yml down -v
docker-compose -f docker-compose.prod.yml up -d --build
```

---

## üéØ –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ production

- [ ] –ò–∑–º–µ–Ω–∏—Ç—å `JWT_SECRET` –Ω–∞ —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `DATABASE_URL` –Ω–∞ production –ë–î
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ `CORS_ORIGIN`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- [ ] –í—ã–ø–æ–ª–Ω–∏—Ç—å seed –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ë–î
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É PWA
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (Render –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

---

**–ì–æ—Ç–æ–≤–æ! üéâ** –í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ GARANT BETON —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ!

